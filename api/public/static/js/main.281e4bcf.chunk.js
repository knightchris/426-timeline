(this["webpackJsonp426-timeline-client"]=this["webpackJsonp426-timeline-client"]||[]).push([[0],{100:function(e,t,a){},103:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),s=a.n(i),r=a(24),d=a.n(r),c=(a(54),a(19)),o=a(2),l=a.n(o),u=a(4),m=a(9),h=a(10),p=a(5),j=a(12),b=a(11),O=(a(32),a(21)),f=a(26),g=a(7),v=a.n(g),_=a(3),x=a.n(_);a(20).config();var w=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={username:"",password:""},n.handleLoginSubmit=n.handleLoginSubmit.bind(Object(p.a)(n)),n.handleRegisterSubmit=n.handleRegisterSubmit.bind(Object(p.a)(n)),n.handleChange=n.handleChange.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"handleLoginSubmit",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/login"),withCredentials:!0,data:{username:this.state.username,password:this.state.password}});case 3:void 0!==(a=e.sent).data.username?(this.props.handleSuccessfulAuth(a.data.username,a.data.contributioncount,a.data.admin),_.store.addNotification({title:"Success!",message:"You are now logged in",type:"success",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270})):"User not found"!==a.data&&"Incorrect password"!==a.data||_.store.addNotification({title:"Failure",message:"Incorrect username or password",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleRegisterSubmit",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/createuser"),withCredentials:!0,data:{username:this.state.username,password:this.state.password}});case 3:"User successfully created"===(a=e.sent).data?_.store.addNotification({title:"Success!",message:"You are now registered",type:"success",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270}):"User already exists"===a.data?_.store.addNotification({title:"Failure",message:"User already exists",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270}):"Password must be at least 5 characters, user must be at least 2 characters"===a.data&&_.store.addNotification({title:"Failure",message:"Password must be 5 characters, username must be 2 characters",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(n.jsx)("div",{id:"registration",children:Object(n.jsxs)("form",{children:[Object(n.jsx)("input",{className:"username",type:"username",name:"username",placeholder:"Username",defaultValue:this.state.username,onChange:this.handleChange,required:!0}),Object(n.jsx)("input",{className:"password",type:"password",name:"password",placeholder:"Password",defaultValue:this.state.password,onChange:this.handleChange,required:!0}),Object(n.jsx)("button",{className:"header-link",type:"submit",onClick:this.handleLoginSubmit,children:"Login"}),Object(n.jsx)("button",{className:"header-link",type:"submit",onClick:this.handleRegisterSubmit,children:"Register"})]})})}}]),a}(s.a.Component);a(20).config();var y=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleSuccessfulAuth=n.handleSuccessfulAuth.bind(Object(p.a)(n)),n.handleLogoutClick=n.handleLogoutClick.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleSuccessfulAuth",value:function(e,t,a){this.props.handleLogin(e,t,a)}},{key:"handleLogoutClick",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/logout"),withCredentials:!0});case 2:t=e.sent,_.store.addNotification({title:"Success!",message:"You are now logged out",type:"success",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270}),t.data||console.log("error"),this.props.handleLogout();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return"LOGGED_IN"===this.props.loggedInStatus?Object(n.jsxs)("nav",{children:[Object(n.jsxs)("div",{id:"nav-left",children:[Object(n.jsx)(O.b,{to:"/",children:Object(n.jsx)("li",{className:"header-link",children:"Timeline"})}),this.props.admin?Object(n.jsx)(O.b,{to:"/admin",children:Object(n.jsx)("li",{className:"header-link",children:"Admin"})}):null]}),Object(n.jsxs)("div",{id:"nav-right",children:[Object(n.jsx)("div",{id:"nav-right-name",children:Object(n.jsxs)("li",{children:["Hello, ",this.props.user,"!"]})}),Object(n.jsx)("div",{id:"nav-right-contributions",children:Object(n.jsxs)("li",{children:["Lifetime total contributions: ",this.props.contributioncount]})}),Object(n.jsx)("button",{onClick:this.handleLogoutClick,className:"header-link",children:"Logout"})]})]}):Object(n.jsxs)("nav",{children:[Object(n.jsx)("div",{id:"nav-left",children:Object(n.jsx)(O.b,{style:{textDecoration:"none"},to:"/",children:Object(n.jsx)("li",{className:"header-link",children:"Timeline"})})}),Object(n.jsx)("div",{id:"nav-right",children:Object(n.jsx)(w,{handleSuccessfulAuth:this.handleSuccessfulAuth})})]})}}]),a}(s.a.Component),I=a(17),N=(a(43),a(95),a(96),function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={activeOption:null,filteredOptions:[],showOptions:!1,userInputObject:{},searchText:""},n.onChange=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,i=n.props.options.filter((function(e){return e.title.toLowerCase().indexOf(a.toLowerCase())>-1})),a){e.next=5;break}return n.setState({activeOption:null,filteredOptions:[],showOptions:!1,searchText:a}),e.abrupt("return");case 5:n.setState({activeOption:0,filteredOptions:i,showOptions:!0,userInputObject:i[0],searchText:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onClick=function(e){var t=e.currentTarget.getAttribute("data-mediaid"),a=n.props.options.filter((function(e){return e.mediaid==t}))[0],i=e.currentTarget.innerText;n.setState({activeOption:null,filteredOptions:[],showOptions:!1,userInputObject:a,searchText:i})},n.onKeyDown=function(e){var t,a=n.state,i=a.activeOption,s=a.filteredOptions;if(13===e.keyCode&&null!==i)n.setState({activeOption:null,showOptions:!1,userInputObject:s[i],searchText:null===(t=s[i])||void 0===t?void 0:t.title}),n.handleClick();else if(38===e.keyCode){if(0===i)return;n.setState({activeOption:i-1,userInputObject:s[i-1]})}else if(40===e.keyCode){if(i===s.length-1)return;n.setState({activeOption:i+1,userInputObject:s[i+1]})}},n.handleClick=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=(null===(a=n.state.userInputObject)||void 0===a?void 0:a.mediaid)&&document.getElementById(n.state.userInputObject.mediaid).scrollIntoView();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onChange=n.onChange.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"render",value:function(){var e,t=this.onChange,a=this.onClick,i=this.onKeyDown,r=this.state,d=r.activeOption,c=r.filteredOptions,o=r.showOptions,l=r.userInputObject,u=r.searchText;return o&&l&&(e=c.length?Object(n.jsx)("ul",{className:"options",children:c.map((function(e,t){var i;return t===d&&(i="option-item"),Object(n.jsx)("li",{"data-mediaid":e.mediaid,className:i,onClick:a,children:e.title},e.mediaid)}))}):Object(n.jsx)("div",{className:"no-options",children:Object(n.jsx)("em",{children:"None"})})),Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("div",{className:"search",children:[Object(n.jsx)("input",{placeholder:"Title name...",type:"text",className:"search-box",onChange:t,onKeyDown:i,value:u}),Object(n.jsx)("input",{type:"submit",value:"Find Item",className:"search-button",onClick:this.handleClick})]}),e]})}}]),a}(i.Component)),C=a.p+"static/media/lightsabers667x575.6ab07ebb.png";a(97);a(20).config();var k={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundImage:"url(".concat(C,")"),width:"667px",height:"575px",padding:"5px",zIndex:1e3,borderRadius:"15px 50px"},S={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,.95)",zIndex:1e3};function L(e){e.children;var t=e.open,a=e.onClose,i=e.data;if(!t)return null;function s(){return(s=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/createcard"),withCredentials:!0,data:{mediatype:t.target[4].value,title:t.target[0].value,description:t.target[5].value,pubdate:t.target[1].value,unidate:t.target[2].value,creator:t.target[3].value}});case 3:"You are not logged in"===(n=e.sent).data?_.store.addNotification({title:"Failure",message:"You are not logged in",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270}):"Problem with request parameters"===n.data?_.store.addNotification({title:"Failure",message:"Check field formatting",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270}):(_.store.addNotification({title:"Success!",message:"Card proposal submitted",type:"success",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270}),a());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/editcard"),withCredentials:!0,data:{mediatype:t.target[4].value,title:t.target[0].value,description:t.target[5].value,pubdate:t.target[1].value,unidate:t.target[2].value,creator:t.target[3].value,proposededitmediaid:i.mediaid}});case 3:"You are not logged in"===(n=e.sent).data?_.store.addNotification({title:"Failure",message:"You are not logged in",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270}):"Problem with request parameters"===n.data?_.store.addNotification({title:"Failure",message:"Check field formatting",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270}):"Proposed media to edit not found with given mediaid"===n.data?_.store.addNotification({title:"Failure",message:"Card to be editted not found",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270}):"Only one pending edit can exist for a card at a time"===n.data?_.store.addNotification({title:"Sorry! This card already has a pending edit request",message:"Try again later",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):(_.store.addNotification({title:"Success!",message:"Card proposal submitted",type:"success",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:2e3,showIcon:!0},width:270}),a());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return null===i?d.a.createPortal(Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{style:S,children:Object(n.jsxs)("div",{style:k,children:[Object(n.jsxs)("form",{onSubmit:function(e){return s.apply(this,arguments)},children:[Object(n.jsxs)("div",{id:"create-card-form-fields",children:[Object(n.jsx)("h2",{className:"create-card-header",children:"Title"}),Object(n.jsx)("input",{type:"title",name:"title",placeholder:"Title",required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("h2",{className:"create-card-header",children:"Publish Date"}),Object(n.jsx)("input",{name:"pubdate",placeholder:"YYYY-MM-DD",required:!0}),Object(n.jsx)("h2",{className:"create-card-header",children:"Universe Date"}),Object(n.jsx)("input",{name:"unidate",placeholder:"YYYY BBY/ABY",required:!0}),Object(n.jsx)("h2",{className:"create-card-header",children:"Creator"}),Object(n.jsx)("input",{name:"creator",placeholder:"Creator",required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("h2",{className:"create-card-header",children:"Media Type"}),Object(n.jsxs)("select",{name:"mediatype",id:"mediatype",required:!0,children:[Object(n.jsx)("option",{value:"movie",children:"Movie"}),Object(n.jsx)("option",{value:"television",children:"Television"}),Object(n.jsx)("option",{value:"book",children:"Book"}),Object(n.jsx)("option",{value:"comic",children:"Comic"})]}),Object(n.jsx)("br",{}),Object(n.jsx)("h2",{id:"create-card-desc",children:"Description"}),Object(n.jsx)("textarea",{id:"create-card-form-description",name:"description",rows:"5",cols:"50",maxLength:"250",placeholder:"250 chararacters max",required:!0})]}),Object(n.jsx)("button",{type:"submit",id:"create-card-submit",children:"Submit"})]}),Object(n.jsx)("button",{id:"create-card-close",onClick:a,children:"Cancel"})]})})}),document.getElementById("portal")):d.a.createPortal(Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{style:S,children:Object(n.jsxs)("div",{style:k,children:[Object(n.jsxs)("form",{onSubmit:function(e){return r.apply(this,arguments)},children:[Object(n.jsxs)("div",{id:"create-card-form-fields",children:[Object(n.jsx)("h2",{className:"create-card-header",children:"Title"}),Object(n.jsx)("input",{type:"title",name:"title",defaultValue:i.title,placeholder:"Title",required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("h2",{className:"create-card-header",children:"Publish Date"}),Object(n.jsx)("input",{name:"pubdate",defaultValue:i.pubdate,placeholder:"YYYY-MM-DD",required:!0}),Object(n.jsx)("h2",{className:"create-card-header",children:"Universe Date"}),Object(n.jsx)("input",{name:"unidate",defaultValue:i.unidate,placeholder:"YYYY BBY/ABY",required:!0}),Object(n.jsx)("h2",{className:"create-card-header",children:"Creator"}),Object(n.jsx)("input",{name:"creator",defaultValue:i.creator,placeholder:"Creator",required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("h2",{className:"create-card-header",children:"Media Type"}),Object(n.jsxs)("select",{name:"mediatype",id:"mediatype",required:!0,children:["movie"===i.mediatype?Object(n.jsx)("option",{value:"movie",selected:!0,children:"Movie"}):Object(n.jsx)("option",{value:"movie",children:"Movie"}),"television"===i.mediatype?Object(n.jsx)("option",{value:"television",selected:!0,children:"Television"}):Object(n.jsx)("option",{value:"television",children:"Television"}),"book"===i.mediatype?Object(n.jsx)("option",{value:"book",selected:!0,children:"Book"}):Object(n.jsx)("option",{value:"book",children:"Book"}),"comic"===i.mediatype?Object(n.jsx)("option",{value:"comic",selected:!0,children:"Comic"}):Object(n.jsx)("option",{value:"comic",children:"Comic"})]}),Object(n.jsx)("br",{}),Object(n.jsx)("h2",{id:"create-card-desc",children:"Description"}),Object(n.jsx)("textarea",{id:"create-card-form-description",name:"description",rows:"5",cols:"50",maxLength:"250",defaultValue:i.description,placeholder:"250 chararacters max",required:!0})]}),Object(n.jsx)("button",{type:"submit",id:"create-card-submit",children:"Submit"})]}),Object(n.jsx)("button",{id:"create-card-close",onClick:a,children:"Cancel"})]})})}),document.getElementById("portal"))}var D=function(e){function t(){return(t=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.store.addNotification({title:"You are not logged in",message:"Login to suggest a new card!",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var a=Object(i.useState)(!1),s=Object(I.a)(a,2);function r(e){return d.apply(this,arguments)}function d(){return(d=Object(u.a)(l.a.mark((function t(a){var n,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.target.textContent,i=[],i="Published Date, Ascending"==n?["pubdate","asc"]:"Published Date, Descending"==n?["pubdate","dsc"]:"Universe Date, Ascending"==n?["unidate","asc"]:["unidate","dsc"],e.updateSort(i);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s[0],s[1];var c=Object(i.useState)(!1),o=Object(I.a)(c,2),m=o[0],h=o[1],p=Object(i.useState)(e.loggedInStatus),j=Object(I.a)(p,2),b=j[0],O=j[1];return Object(i.useEffect)((function(){O(e.loggedInStatus)}),[e.loggedInStatus]),Object(n.jsxs)("div",{className:"first",children:[Object(n.jsxs)("div",{className:"Sidebar",children:[Object(n.jsx)("h1",{className:"title",children:"Star Wars Timeline"}),Object(n.jsx)("header",{className:"Sidebar-header",children:Object(n.jsx)("div",{id:"outer",children:Object(n.jsxs)("div",{className:"inner",children:["LOGGED_IN"===b?Object(n.jsx)("button",{className:"Sidebar-button",onClick:function(){return h(!0)},children:"Suggest New Card"}):Object(n.jsx)("button",{className:"Sidebar-button",onClick:function(){return t.apply(this,arguments)},children:"Suggest New Card"}),Object(n.jsx)(L,{data:null,open:m,onClose:function(){return h(!1)}})]})})})]}),Object(n.jsxs)("div",{className:"sidenav",children:[Object(n.jsx)(N,{options:e.cards}),Object(n.jsxs)("div",{className:"custom-select",id:"dropdown",children:[Object(n.jsx)("button",{className:"sidenav-button",id:"dropdownbtn",children:"Sort"}),Object(n.jsxs)("ul",{className:"dropdown-content",children:[Object(n.jsx)("li",{onClick:r,className:"sort-option",children:"Published Date, Ascending"}),Object(n.jsx)("li",{onClick:r,className:"sort-option",children:"Published Date, Descending"}),Object(n.jsx)("li",{onClick:r,className:"sort-option",children:"Universe Date, Ascending"}),Object(n.jsx)("li",{onClick:r,className:"sort-option",children:"Universe Date, Descending"})]})]})]})]})};a(44);function Y(e){if(("movie"===e.data.mediatype||"television"===e.data.mediatype)&&null!=e.data.rating)return Object(n.jsxs)("div",{className:"mediadiv",children:[Object(n.jsx)("span",{className:"medialabel",children:"IMDB Rating:"})," ",e.data.rating]})}var T=function(e){function t(){return(t=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.store.addNotification({title:"You are not logged in",message:"Login to suggest a card edit!",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s=Object(i.useState)(!1),r=Object(I.a)(s,2),d=r[0],c=r[1],o=Object(i.useState)(!1),m=Object(I.a)(o,2),h=m[0],p=m[1],j=Object(i.useState)(e.loggedInStatus),b=Object(I.a)(j,2),O=b[0],f=b[1];if(Object(i.useEffect)((function(){f(e.loggedInStatus)}),[e.loggedInStatus]),d)return Object(n.jsx)(A,{data:e.data,loggedInStatus:O});var g="television"===e.data.mediatype?"tv show":e.data.mediatype;return Object(n.jsxs)("div",{className:"timelineItem",id:e.data.mediaid,children:[Object(n.jsxs)("div",{className:"content",children:[Object(n.jsx)("i",{className:"glyphicon glyphicon-remove",onClick:function(e){return t.apply(this,arguments)}}),"LOGGED_IN"===O?Object(n.jsx)("i",{className:"glyphicon glyphicon-edit",onClick:function(){return p(!0)}}):Object(n.jsx)("i",{className:"glyphicon glyphicon-edit",onClick:function(){return a.apply(this,arguments)}}),Object(n.jsx)("h1",{className:"card-header",children:e.data.title}),Object(n.jsxs)("div",{className:"mediadiv",children:[Object(n.jsxs)("span",{className:"medialabel",children:[Object(n.jsx)("span",{className:"cap",children:g})," by:"]})," ",e.data.creator]}),Y(e),Object(n.jsxs)("div",{className:"unidiv",children:[Object(n.jsx)("span",{className:"medialabel",children:"Universe date:"})," ","0"==e.data.unidate.substring(0,1)?"0":e.data.unidate]}),Object(n.jsxs)("div",{className:"unidiv",children:[Object(n.jsx)("span",{className:"medialabel",children:"Released:"})," ",e.data.pubdate.substring(0,10)]}),Object(n.jsx)("p",{className:"unidiv",children:e.data.description}),Object(n.jsxs)("p",{children:["Contributed by: ",e.data.contributors.join(", ")]}),Object(n.jsx)(L,{data:e.data,open:h,onClose:function(){return p(!1)}})]}),Object(n.jsx)("span",{className:"circle"})]})},A=(a(98),function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(p.a)(n)),n.state={id:n.key,displayModal:!1},n}return Object(h.a)(a,[{key:"handleClick",value:function(e){this.setState({displayModal:!0})}},{key:"render",value:function(){return this.state.displayModal?Object(n.jsx)(T,{loggedInStatus:this.props.loggedInStatus,data:this.props.data}):Object(n.jsxs)("div",{className:"timelineItem",id:this.props.data.mediaid,children:[Object(n.jsxs)("div",{className:"content",onClick:this.handleClick,children:[Object(n.jsx)("h1",{className:"card-header",children:this.props.data.title}),Object(n.jsxs)("div",{className:"mediadiv cap",children:[Object(n.jsx)("span",{className:"medialabel",children:"Media Type:"})," ",this.props.data.mediatype]}),Object(n.jsxs)("div",{className:"unidiv",children:[Object(n.jsx)("span",{className:"medialabel",children:"Universe date:"})," ","0"==this.props.data.unidate.substring(0,1)?"0":this.props.data.unidate]}),Object(n.jsxs)("div",{className:"unidiv",children:[Object(n.jsx)("span",{className:"medialabel",children:"Released:"})," ",this.props.data.pubdate.substring(0,10)]})]}),Object(n.jsx)("span",{className:"circle"})]})}}]),a}(s.a.Component));a(20).config();var F=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={error:null,isLoaded:!1,cards:[],sort:["unidate","dsc"]},n.updateSort=n.updateSort.bind(Object(p.a)(n)),n.uniYearConvert=n.uniYearConvert.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/mediacards"),withCredentials:!0,data:{approved:!0}});case 2:return t=e.sent,e.t0=this,e.next=6,t.data;case 6:e.t1=e.sent,e.t2={isLoaded:!0,cards:e.t1},e.t0.setState.call(e.t0,e.t2);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateSort",value:function(e){this.setState({sort:e})}},{key:"uniYearConvert",value:function(e){var t=e.unidate.split(" "),a=Object(I.a)(t,2),n=a[0];return"bby"==a[1].toLowerCase()?-n:n}},{key:"sort",value:function(e,t){var a=this,n=e;return"pubdate"===t[0]&&(n=e.sort((function(e,t){return new Date(e.pubdate)-new Date(t.pubdate)}))),"unidate"===t[0]&&(n=e.sort((function(e,t){return a.uniYearConvert(e)-a.uniYearConvert(t)}))),"dsc"===t[1]&&(n=n.reverse()),n}},{key:"render",value:function(){var e=this,t=this.state,a=t.error,i=t.isLoaded,s=t.cards,r=t.sort;if(a)return Object(n.jsxs)("div",{className:"timeline",children:["Error: ",a.message]});if(i){var d=this.sort(s,r).map((function(t){return Object(n.jsx)(A,{loggedInStatus:e.props.loggedInStatus,data:t},t.mediaid)}));return Object(n.jsxs)("div",{className:"timeline",children:[Object(n.jsx)(D,{cards:s,loggedInStatus:this.props.loggedInStatus,updateSort:this.updateSort}),Object(n.jsx)("div",{className:"timeline-content",children:d})]})}return Object(n.jsx)("div",{className:"timeline",children:"Loading..."})}}]),a}(s.a.Component),M=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsx)(F,{loggedInStatus:this.props.loggedInStatus})})}}]),a}(s.a.Component),E=a(48),G=a(46);function U(e){if(("movie"===e.data.mediatype||"television"===e.data.mediatype)&&null!=e.data.rating)return Object(n.jsxs)("div",{className:"mediadiv",children:[Object(n.jsx)("span",{className:"medialabel",children:"IMDB Rating:"})," ",e.data.rating]})}function B(e){var t="television"===e.data.mediatype?"tv show":e.data.mediatype;if(void 0!==e.originalcard&&"Media with given mediaid not found"!==e.originalcard)return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsxs)("div",{className:"content",children:[Object(n.jsx)("h3",{children:"Original Card"}),Object(n.jsx)("h1",{className:"card-header",children:e.originalcard.title}),Object(n.jsxs)("div",{className:"mediadiv",children:[Object(n.jsxs)("span",{className:"medialabel",children:[Object(n.jsx)("span",{className:"cap",children:t})," by:"]})," ",e.originalcard.creator]}),U(e),Object(n.jsxs)("div",{className:"unidiv",children:[Object(n.jsx)("span",{className:"medialabel",children:"Universe date:"})," ","0"==e.originalcard.unidate.substring(0,1)?"0":e.originalcard.unidate]}),Object(n.jsxs)("div",{className:"unidiv",children:[Object(n.jsx)("span",{className:"medialabel",children:"Released:"})," ",e.originalcard.pubdate.substring(0,10)]}),Object(n.jsx)("p",{className:"unidiv",children:e.originalcard.description})]})]})}var P=function(e){var t="television"===e.data.mediatype?"tv show":e.data.mediatype;return Object(n.jsxs)("div",{className:"timelineItem",id:e.data.mediaid,children:[Object(n.jsxs)("div",{className:"content",children:["Media with given mediaid not found"===e.originalcard?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Proposed New Card"}),Object(n.jsx)("i",{className:"glyphicon glyphicon-check",onClick:function(){return e.handleApproveNewCard(e.data.mediaid)}})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Proposed Edit"}),Object(n.jsx)("i",{className:"glyphicon glyphicon-check",onClick:function(){return e.handleApproveEditCard(e.data.mediaid,e.data.contributors[0])}})]}),Object(n.jsx)("i",{className:"glyphicon glyphicon-remove",onClick:function(){return e.handleDenyCard(e.data.mediaid)}}),Object(n.jsx)("h1",{className:"card-header",children:e.data.title}),Object(n.jsxs)("div",{className:"mediadiv",children:[Object(n.jsxs)("span",{className:"medialabel",children:[Object(n.jsx)("span",{className:"cap",children:t})," by:"]})," ",e.data.creator]}),U(e),Object(n.jsxs)("div",{className:"unidiv",children:[Object(n.jsx)("span",{className:"medialabel",children:"Universe date:"})," ","0"==e.data.unidate.substring(0,1)?"0":e.data.unidate]}),Object(n.jsxs)("div",{className:"unidiv",children:[Object(n.jsx)("span",{className:"medialabel",children:"Released:"})," ",e.data.pubdate.substring(0,10)]}),Object(n.jsx)("p",{className:"unidiv",children:e.data.description}),Object(n.jsxs)("p",{children:["Contributed by: ",e.data.contributors.join(", ")]})]}),B(e)]})};a(20).config();var q=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={error:null,isLoaded:!1,cards:[],originalcards:[]},n.handleApproveNewCard=n.handleApproveNewCard.bind(Object(p.a)(n)),n.handleDenyCard=n.handleDenyCard.bind(Object(p.a)(n)),n.handleApproveEditCard=n.handleApproveEditCard.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleApproveNewCard",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/approvenewcard"),withCredentials:!0,data:{mediaid:t}});case 2:"You are not logged in"===(a=e.sent).data?_.store.addNotification({title:"You are not logged in",message:"Login to approve a card",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):"You are not an admin"===a.data?_.store.addNotification({title:"You are not an admin",message:"Only admins can approve cards",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):"Media with given mediaid not found"===a.data?_.store.addNotification({title:"Failure",message:"Cannot find item to approve",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):"This card is a proposed edit, not new"===a.data?_.store.addNotification({title:"Failure",message:"This card is an edit, not new. Fix your admin interface",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):(_.store.addNotification({title:"Success!",message:"New card approved",type:"success",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}),this.setState({cards:this.state.cards.filter((function(e){return e.mediaid!==t})),originalcards:this.state.originalcards.filter((function(e){return e.proposededitmediaid!==t}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleApproveEditCard",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/approveeditcard"),withCredentials:!0,data:{username:a,mediaid:t}});case 2:"You are not logged in"===(n=e.sent).data?_.store.addNotification({title:"You are not logged in",message:"Login to approve a card",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):"You are not an admin"===n.data?_.store.addNotification({title:"You are not an admin",message:"Only admins can approve edit cards",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):"Media with given mediaid not found"===n.data?_.store.addNotification({title:"Failure",message:"Cannot find item to delete",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):"This card is not a proposed edit"===n.data?_.store.addNotification({title:"Failure",message:"This card is not an edit. Fix your admin interface",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):(_.store.addNotification({title:"Success!",message:"Card edit approved",type:"success",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}),this.setState({cards:this.state.cards.filter((function(e){return e.mediaid!==t})),originalcards:this.state.originalcards.filter((function(e){return e.proposededitmediaid!==t}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleDenyCard",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/deletecard"),withCredentials:!0,data:{mediaid:t}});case 2:"You are not logged in"===(a=e.sent).data?_.store.addNotification({title:"You are not logged in",message:"Login to deny a card",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):"You are not an admin"===a.data?_.store.addNotification({title:"You are not an admin",message:"Only admins can delete cards",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):"Media with given mediaid not found"===a.data?_.store.addNotification({title:"Failure",message:"Cannot find item to delete",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):(_.store.addNotification({title:"Success!",message:"Card denied",type:"success",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}),this.setState({cards:this.state.cards.filter((function(e){return e.mediaid!==t})),originalcards:this.state.originalcards.filter((function(e){return e.proposededitmediaid!==t}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/mediacards"),withCredentials:!0,data:{approved:!1}});case 2:return t=e.sent,e.t0=this,e.next=6,t.data;case 6:e.t1=e.sent,e.t2={cards:e.t1},e.t0.setState.call(e.t0,e.t2),a=Object(G.a)(this.state.cards),e.prev=10,a.s();case 12:if((n=a.n()).done){e.next=20;break}return i=n.value,e.next=16,v()({method:"post",url:"".concat("https://comp426-timeline.herokuapp.com","/findcard"),withCredentials:!0,data:{mediaid:i.proposededitmediaid}});case 16:s=e.sent,this.setState({originalcards:[].concat(Object(E.a)(this.state.originalcards),[s.data])});case 18:e.next=12;break;case 20:e.next=25;break;case 22:e.prev=22,e.t3=e.catch(10),a.e(e.t3);case 25:return e.prev=25,a.f(),e.finish(25);case 28:this.setState({isLoaded:!0});case 29:case"end":return e.stop()}}),e,this,[[10,22,25,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoaded;if(t)return Object(n.jsxs)("div",{className:"timeline",children:["Error: ",t.message]});if(a){for(var i=[],s=0;s<this.state.cards.length;s++)i.push(Object(n.jsx)(P,{data:this.state.cards[s],originalcard:this.state.originalcards[s],handleApproveNewCard:this.handleApproveNewCard,handleDenyCard:this.handleDenyCard,handleApproveEditCard:this.handleApproveEditCard},this.state.cards[s].mediaid));return Object(n.jsx)("div",{className:"timeline",children:Object(n.jsx)("div",{className:"timeline-content",children:i})})}return Object(n.jsx)("div",{className:"timeline",children:"Loading..."})}}]),a}(s.a.Component);a(99);a(20).config();var R=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleRatingsUpdate=n.handleRatingsUpdate.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleRatingsUpdate",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"get",url:"".concat("https://comp426-timeline.herokuapp.com","/updateratings"),withCredentials:!0});case 2:"You are not logged in"===(t=e.sent).data?_.store.addNotification({title:"You are not logged in",message:"Login to update ratings",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):"You are not an admin"===t.data?_.store.addNotification({title:"You are not an admin",message:"Only admins can update ratings",type:"danger",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270}):_.store.addNotification({title:"Success!",message:"Cached IMDB ratings updated",type:"success",container:"top-center",insert:"top",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:4e3,showIcon:!0},width:270});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"AdminTimeline",children:[Object(n.jsx)("br",{}),Object(n.jsx)("h1",{className:"admintimeline-title",children:"Admin Timeline"}),Object(n.jsx)("button",{className:"admintimeline-button",onClick:this.handleRatingsUpdate,children:"Update IMDB Ratings"}),Object(n.jsx)(q,{})]})}}]),a}(s.a.Component),V=a(6),K=a(47),z=function(e){var t=e.component,a=e.admin,i=Object(K.a)(e,["component","admin"]);return Object(n.jsx)(V.b,Object(c.a)(Object(c.a)({},i),{},{render:function(e){return a?Object(n.jsx)(t,Object(c.a)(Object(c.a)({},i),e)):Object(n.jsx)(V.a,{to:{pathname:"/"}})}}))};a(100),a(101),a(102);a(20).config();var J=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={loggedInStatus:"NOT_LOGGED_IN",user:"",contributioncount:0,admin:!1},e.handleLogin=e.handleLogin.bind(Object(p.a)(e)),e.handleLogout=e.handleLogout.bind(Object(p.a)(e)),e}return Object(h.a)(a,[{key:"checkLoginStatus",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"get",url:"".concat("https://comp426-timeline.herokuapp.com","/checklogin"),withCredentials:!0});case 2:void 0!==(t=e.sent).data.username&&"NOT_LOGGED_IN"===this.state.loggedInStatus?this.setState({loggedInStatus:"LOGGED_IN",user:t.data.username,contributioncount:t.data.contributioncount,admin:t.data.admin}):"You are not logged in"===t.data&&"LOGGED_IN"===this.state.loggedInStatus&&this.setState({loggedInStatus:"NOT_LOGGED_IN",user:"",contributioncount:0,admin:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.checkLoginStatus()}},{key:"handleLogin",value:function(e,t,a){this.setState({loggedInStatus:"LOGGED_IN",user:e,contributioncount:t,admin:a})}},{key:"handleLogout",value:function(){this.setState({loggedInStatus:"NOT_LOGGED_IN",user:"",contributioncount:0,admin:!1})}},{key:"render",value:function(){var e=this;return Object(n.jsxs)(O.a,{children:[Object(n.jsx)("div",{id:"background"}),Object(n.jsx)("div",{id:"midground"}),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(x.a,{}),Object(n.jsx)(y,{loggedInStatus:this.state.loggedInStatus,user:this.state.user,contributioncount:this.state.contributioncount,admin:this.state.admin,handleLogin:this.handleLogin,handleLogout:this.handleLogout}),Object(n.jsxs)(V.d,{children:[Object(n.jsx)(V.b,{exact:!0,path:"/",render:function(t){return Object(n.jsx)(M,Object(c.a)(Object(c.a)({},t),{},{loggedInStatus:e.state.loggedInStatus}))}}),Object(n.jsx)(z,{exact:!0,path:"/admin",admin:this.state.admin,component:R})]})]})]})}}]),a}(s.a.Component),H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,104)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),i(e),s(e),r(e)}))};a.p;d.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(J,{})}),document.getElementById("root")),H()},32:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},54:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[103,1,2]]]);
//# sourceMappingURL=main.281e4bcf.chunk.js.map